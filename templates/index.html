<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <title>Dólar Tracker</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>

<body>
    <div class="container">
        <h1>Cotação do Dólar (USD/BRL)</h1>
        <div id="price">Carregando...</div>
        <button onclick="refresh()">Atualizar Agora</button>
    </div>

    <script>
        async function loadPrice() {
            const resp = await fetch("/api/rate");
            const data = await resp.json();
            document.getElementById("price").innerText =
                `R$ ${data.price.toFixed(4)} (às ${new Date(data.at).toLocaleTimeString()})`;
        }

        async function refresh() {
            await fetch("/api/refresh", { method: "POST" });
            loadPrice();
        }

        loadPrice();
        setInterval(loadPrice, 60000);
    </script>
</body>

</html>